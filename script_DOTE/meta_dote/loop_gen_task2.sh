#!/bin/bash
# some error: not source ~/.bashrc(no env variable); not activate dote;
# /mydata/DOTE/networking_envs/data/loop_gen_task.sh > /mydata/DOTE/networking_envs/data/gen_log/3.log
# conda activate dote
edges=("('0', '1')" "('0', '2')" "('1', '10')" "('2', '9')" "('3', '4')" "('3', '6')" "('4', '5')" "('4', '6')" "('5', '8')" "('6', '7')" "('7', '8')" "('7', '10')" "('8', '9')" "('9', '10')")
for ((i=9; i<13; i++)); # i=0; i<${#edges[@]};  0 2; 2 5;5 9;9 13
do
    for ((j=i+1; j<${#edges[@]}; j++));
    do  
        cd /mydata/DOTE/networking_envs/data/
        /mydata/miniconda3/envs/dote/bin/python loop_gml_to_dote.py "Abilene" "${edges[i]}" "${edges[j]}"
        # don't forget!! To compute the optimum for the demand matrices, go to /mydata/DOTE/networking_envs/data/Abilene and run /mydata/DOTE/networking_envs/data/compute_opts.py
        cd "/mydata/DOTE/networking_envs/data/Abilene-2-${edges[i]}-${edges[j]}"
        /mydata/miniconda3/envs/dote/bin/python /mydata/DOTE/networking_envs/data/loop_compute_opts.py "Abilene-2-${edges[i]}-${edges[j]}"
    done
done

############## reduce single link
# edges=("('0', '1')" "('0', '2')" "('1', '10')" "('2', '9')" "('3', '4')" "('3', '6')" "('4', '5')" "('4', '6')" "('5', '8')" "('6', '7')" "('7', '8')" "('7', '10')" "('8', '9')" "('9', '10')")
# for ((i=0; i<13; i++)); # i=0; i<${#edges[@]};  0 2; 2 5;5 9;9 13
# do
#     cd /mydata/DOTE/networking_envs/data/
#     /mydata/miniconda3/envs/dote/bin/python loop_gml_to_dote.py "Abilene" "${edges[i]}"  # 这里不要加 -num-
#     # don't forget!! To compute the optimum for the demand matrices, go to /mydata/DOTE/networking_envs/data/Abilene and run /mydata/DOTE/networking_envs/data/compute_opts.py
#     cd "/mydata/DOTE/networking_envs/data/Abilene-1-${edges[i]}"
#     /mydata/miniconda3/envs/dote/bin/python /mydata/DOTE/networking_envs/data/loop_compute_opts.py "Abilene-1-${edges[i]}"
# done

############## generate other two different topo
# /mydata/miniconda3/envs/dote/bin/python loop_gml_to_dote.py "Arnes" "('1', '23')"
# /mydata/miniconda3/envs/dote/bin/python /mydata/DOTE/networking_envs/data/loop_compute_opts.py "Arnes-1-('7', '23')"

# /mydata/miniconda3/envs/dote/bin/python loop_gml_to_dote.py "Abilene0" "('1', '10')"
# /mydata/miniconda3/envs/dote/bin/python /mydata/DOTE/networking_envs/data/loop_compute_opts.py "Abilene0-1-('1', '10')"




# {('0', '176'): '10000.0', ('0', '9'): '10000.0', ('1', '8'): '10000.0', ('1', '176'): '10000.0', ('1', '114'): '10000.0', ('1', '116'): '10000.0', ('1', '175'): '10000.0', ('2', '76'): '10000.0', ('2', '77'): '10000.0', ('3', '4'): '10000.0', ('3', '77'): '10000.0', ('4', '6'): '10000.0', ('4', '135'): '10000.0', ('5', '131'): '10000.0', ('5', '6'): '10000.0', ('6', '7'): '10000.0', ('7', '8'): '10000.0', ('7', '174'): '10000.0', ('8', '194'): '10000.0', ('8', '9'): '10000.0', ('8', '191'): '10000.0', ('10', '11'): '10000.0', ('10', '13'): '10000.0', ('11', '16'): '10000.0', ('12', '32'): '10000.0', ('12', '13'): '10000.0', ('12', '30'): '10000.0', ('13', '16'): '10000.0', ('13', '15'): '10000.0', ('14', '64'): '10000.0', ('14', '129'): '10000.0', ('14', '15'): '10000.0', ('16', '17'): '10000.0', ('18', '19'): '10000.0', ('18', '30'): '10000.0', ('19', '89'): '10000.0', ('19', '68'): '10000.0', ('19', '82'): '10000.0', ('20', '21'): '10000.0', ('20', '23'): '10000.0', ('21', '26'): '10000.0', ('22', '188'): '10000.0', ('22', '23'): '10000.0', ('24', '27'): '10000.0', ('25', '171'): '10000.0', ('25', '55'): '10000.0', ('26', '27'): '10000.0', ('26', '28'): '10000.0', ('26', '29'): '10000.0', ('28', '51'): '10000.0', ('28', '54'): '10000.0', ('29', '78'): '10000.0', ('30', '35'): '10000.0', ('31', '37'): '10000.0', ('32', '33'): '10000.0', ('32', '37'): '10000.0', ('34', '37'): '10000.0', ('35', '37'): '10000.0', ('36', '38'): '10000.0', ('36', '39'): '10000.0', ('37', '160'): '10000.0', ('37', '38'): '10000.0', ('38', '196'): '10000.0', ('39', '181'): '10000.0', ('40', '41'): '10000.0', ('40', '42'): '10000.0', ('41', '43'): '10000.0', ('41', '189'): '10000.0', ('42', '43'): '10000.0', ('42', '143'): '10000.0', ('44', '45'): '10000.0', ('44', '47'): '10000.0', ('45', '48'): '10000.0', ('45', '164'): '10000.0', ('46', '49'): '10000.0', ('46', '47'): '10000.0', ('48', '155'): '10000.0', ('48', '181'): '10000.0', ('49', '177'): '10000.0', ('49', '147'): '10000.0', ('49', '165'): '10000.0', ('50', '57'): '10000.0', ('50', '51'): '10000.0', ('51', '188'): '10000.0', ('52', '53'): '10000.0', ('52', '55'): '10000.0', ('53', '58'): '10000.0', ('54', '55'): '10000.0', ('56', '57'): '10000.0', ('56', '59'): '10000.0', ('58', '59'): '10000.0', ('60', '61'): '10000.0', ('60', '69'): '10000.0', ('61', '128'): '10000.0', ('61', '122'): '10000.0', ('62', '144'): '10000.0', ('62', '86'): '10000.0', ('62', '63'): '10000.0', ('63', '68'): '10000.0', ('63', '149'): '10000.0', ('64', '65'): '10000.0', ('64', '67'): '10000.0', ('64', '68'): '10000.0', ('65', '66'): '10000.0', ('66', '67'): '10000.0', ('67', '69'): '10000.0', ('69', '144'): '10000.0', ('70', '79'): '10000.0', ('70', '183'): '10000.0', ('71', '72'): '10000.0', ('71', '79'): '10000.0', ('72', '73'): '10000.0', ('73', '74'): '10000.0', ('74', '183'): '10000.0', ('75', '173'): '10000.0', ('75', '183'): '10000.0', ('76', '173'): '10000.0', ('77', '152'): '10000.0', ('77', '162'): '10000.0', ('77', '133'): '10000.0', ('78', '94'): '10000.0', ('78', '79'): '10000.0', ('80', '81'): '10000.0', ('80', '86'): '10000.0', ('80', '87'): '10000.0', ('82', '88'): '10000.0', ('82', '83'): '10000.0', ('82', '150'): '10000.0', ('83', '148'): '10000.0', ('84', '148'): '10000.0', ('84', '85'): '10000.0', ('86', '87'): '10000.0', ('87', '88'): '10000.0', ('89', '150'): '10000.0', ('90', '172'): '10000.0', ('91', '99'): '10000.0', ('91', '92'): '10000.0', ('92', '96'): '10000.0', ('92', '93'): '10000.0', ('92', '183'): '10000.0', ('94', '171'): '10000.0', ('95', '96'): '10000.0', ('95', '171'): '10000.0', ('96', '97'): '10000.0', ('97', '172'): '10000.0', ('98', '194'): '10000.0', ('98', '131'): '10000.0', ('99', '100'): '10000.0', ('100', '132'): '10000.0', ('101', '104'): '10000.0', ('101', '180'): '10000.0', ('101', '102'): '10000.0', ('102', '109'): '10000.0', ('103', '104'): '10000.0', ('103', '106'): '10000.0', ('105', '106'): '10000.0', ('105', '107'): '10000.0', ('105', '179'): '10000.0', ('107', '108'): '10000.0', ('107', '129'): '10000.0', ('108', '179'): '10000.0', ('109', '110'): '10000.0', ('110', '128'): '10000.0', ('111', '112'): '10000.0', ('111', '140'): '10000.0', ('112', '137'): '10000.0', ('113', '114'): '10000.0', ('113', '191'): '10000.0', ('115', '116'): '10000.0', ('115', '118'): '10000.0', ('117', '120'): '10000.0', ('117', '118'): '10000.0', ('119', '176'): '10000.0', ('119', '175'): '10000.0', ('120', '175'): '10000.0', ('121', '122'): '10000.0', ('121', '124'): '10000.0', ('123', '124'): '10000.0', ('123', '125'): '10000.0', ('123', '126'): '10000.0', ('127', '128'): '10000.0', ('127', '130'): '10000.0', ('129', '130'): '10000.0', ('131', '142'): '10000.0', ('132', '135'): '10000.0', ('133', '173'): '10000.0', ('134', '137'): '10000.0', ('134', '138'): '10000.0', ('134', '135'): '10000.0', ('136', '139'): '10000.0', ('137', '172'): '10000.0', ('138', '174'): '10000.0', ('138', '141'): '10000.0', ('139', '174'): '10000.0', ('140', '141'): '10000.0', ('142', '143'): '10000.0', ('143', '185'): '10000.0', ('144', '149'): '10000.0', ('145', '157'): '10000.0', ('146', '152'): '10000.0', ('146', '154'): '10000.0', ('147', '166'): '10000.0', ('147', '177'): '10000.0', ('148', '154'): '10000.0', ('149', '150'): '10000.0', ('151', '152'): '10000.0', ('152', '153'): '10000.0', ('153', '160'): '10000.0', ('153', '154'): '10000.0', ('154', '159'): '10000.0', ('154', '183'): '10000.0', ('155', '195'): '10000.0', ('155', '156'): '10000.0', ('155', '165'): '10000.0', ('156', '157'): '10000.0', ('157', '158'): '10000.0', ('158', '183'): '10000.0', ('158', '196'): '10000.0', ('158', '165'): '10000.0', ('161', '162'): '10000.0', ('162', '163'): '10000.0', ('162', '167'): '10000.0', ('163', '187'): '10000.0', ('163', '164'): '10000.0', ('165', '177'): '10000.0', ('165', '181'): '10000.0', ('165', '184'): '10000.0', ('165', '186'): '10000.0', ('166', '170'): '10000.0', ('166', '183'): '10000.0', ('167', '168'): '10000.0', ('168', '169'): '10000.0', ('169', '185'): '10000.0', ('178', '179'): '10000.0', ('181', '196'): '10000.0', ('182', '189'): '10000.0', ('183', '184'): '10000.0', ('183', '186'): '10000.0', ('186', '187'): '10000.0', ('190', '191'): '10000.0', ('192', '193'): '10000.0', ('193', '194'): '10000.0', ('195', '196'): '10000.0'}
